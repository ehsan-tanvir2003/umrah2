
@if (group(); as grp) {
  <div class="max-w-7xl mx-auto space-y-6">
    <!-- Header -->
    <div class="bg-white rounded-lg shadow-md p-6">
        <div class="flex justify-between items-start">
            <div>
                <h2 class="text-3xl font-bold text-gray-800">{{ grp.name }}</h2>
                <p class="text-gray-500 mt-1">{{ grp.description }}</p>
                <p class="text-sm text-gray-500 mt-2">Travel Date: <span class="font-medium text-gray-700">{{ grp.travelDate }}</span></p>
            </div>
            <div class="flex items-center space-x-2">
                <a routerLink="/groups" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300">&larr; Back to Groups</a>
                <button (click)="downloadDocuments()" class="flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">
                    <svg class="w-5 h-5 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3" />
                    </svg>
                    Download Group Documents
                </button>
            </div>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- Group Members -->
        <div class="bg-white rounded-lg shadow-md">
            <div class="p-4 border-b">
                <h3 class="text-lg font-semibold text-gray-800">Group Members ({{ groupMembers().length }})</h3>
            </div>
            <div class="overflow-y-auto max-h-[60vh]">
                <table class="min-w-full divide-y divide-gray-200">
                    <tbody class="bg-white divide-y divide-gray-200">
                        @for (member of groupMembers(); track member.id) {
                            <tr class="hover:bg-gray-50">
                                <td class="px-6 py-4">
                                    <div class="text-sm font-medium text-gray-900">{{ member.fullName }}</div>
                                    <div class="text-sm text-gray-500">{{ member.passportNumber }}</div>
                                </td>
                                <td class="px-6 py-4 text-right">
                                    <button (click)="removeMember(member)" class="text-red-600 hover:text-red-900 text-sm font-medium">Remove</button>
                                </td>
                            </tr>
                        } @empty {
                            <tr><td class="px-6 py-8 text-center text-gray-500" colspan="2">No members in this group yet.</td></tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Available Customers -->
         <div class="bg-white rounded-lg shadow-md">
            <div class="p-4 border-b">
                <h3 class="text-lg font-semibold text-gray-800">Available Customers to Add</h3>
            </div>
             <div class="overflow-y-auto max-h-[60vh]">
                <table class="min-w-full divide-y divide-gray-200">
                    <tbody class="bg-white divide-y divide-gray-200">
                        @for (customer of availableCustomers(); track customer.id) {
                            <tr class="hover:bg-gray-50">
                                <td class="px-6 py-4">
                                    <div class="text-sm font-medium text-gray-900">{{ customer.fullName }}</div>
                                    <div class="text-sm text-gray-500">{{ customer.passportNumber }}</div>
                                </td>
                                <td class="px-6 py-4 text-right">
                                    <button (click)="addMember(customer.id)" class="text-green-600 hover:text-green-900 text-sm font-medium">Add to Group</button>
                                </td>
                            </tr>
                        } @empty {
                             <tr><td class="px-6 py-8 text-center text-gray-500" colspan="2">All customers are in a group.</td></tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
  </div>
} @else {
    <div class="text-center py-20">
        <p class="text-gray-500">Loading group details...</p>
    </div>
}
